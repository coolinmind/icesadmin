/** layui-v2.4.2 MIT License By https://www.layui.com */
 ;layui.define(["jquery","form"],function(e){"use strict";var r=layui.$,o=layui.form,a=layui.hint(),i=(new Date).getTime(),n="layui-tree-enter",t=function(e){this.options=e},c={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};t.prototype.init=function(e){var r=this;e.addClass("layui-box layui-tree"),r.options.skin&&e.addClass("layui-tree-skin-"+r.options.skin),r.tree(e),r.on(e)},t.prototype.tree=function(e,o){var a=this,n=a.options,t=o||n.nodes;layui.each(t,function(o,t){var l=t.children&&t.children.length>0,s=r('<ul class="'+(t.spread?"layui-show":"")+'"></ul>'),d=r(["<li "+(t.spread?'data-spread="'+t.spread+'"':"")+">",function(){return l?'<i class="layui-icon layui-tree-spread">'+(t.spread?c.arrow[1]:c.arrow[0])+"</i>":""}(),function(){return n.check?"checkbox"===n.check?'<input lay-skin="primary" type="checkbox" name="'+(n.checkname||i)+'[]" value="'+t.value+'" '+(t.checked?"checked":"")+' lay-filter="icesadmin-tree-checkbox" />':"radio"===n.check?'<input lay-skin="primary" type="radio" name="'+(n.checkname||i)+'" value="'+t.value+'" '+(t.checked?"checked":"")+" />":"":""}(),function(){return'<a href="'+(t.href||"javascript:;")+'" '+(n.target&&t.href?'target="'+n.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(l?"branch":"leaf")+'">'+(l?t.spread?c.branch[1]:c.branch[0]:c.leaf)+"</i>")+("<cite>"+(t.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));l&&(d.append(s),a.tree(s,t.children)),e.append(d),"function"==typeof n.click&&a.click(d,t),a.spread(d,t),n.drag&&a.drag(d,t)})},t.prototype.click=function(e,r){var o=this,a=o.options;e.children("a").on("click",function(e){layui.stope(e),a.click(r)})},t.prototype.spread=function(e,r){var o=this,a=(o.options,e.children(".layui-tree-spread")),i=e.children("ul"),n=e.children("a"),t=function(){e.data("spread")?(e.data("spread",null),i.removeClass("layui-show"),a.html(c.arrow[0]),n.find(".layui-icon").html(c.branch[0])):(e.data("spread",!0),i.addClass("layui-show"),a.html(c.arrow[1]),n.find(".layui-icon").html(c.branch[1]))};i[0]&&(a.on("click",t),n.on("dblclick",t))},t.prototype.on=function(e){var o=this,a=o.options,i="layui-tree-drag";e.find("i").on("selectstart",function(e){return!1}),a.drag&&r(document).on("mousemove",function(e){var a=o.move;if(a.from){var n=(a.to,r('<div class="layui-box '+i+'"></div>'));e.preventDefault(),r("."+i)[0]||r("body").append(n);var t=r("."+i)[0]?r("."+i):n;t.addClass("layui-show").html(a.from.elem.children("a").html()),t.css({left:e.pageX+10,top:e.pageY+10})}}).on("mouseup",function(){var e=o.move;e.from&&(e.from.elem.children("a").removeClass(n),e.to&&e.to.elem.children("a").removeClass(n),o.move={},r("."+i).remove())})},t.prototype.move={},t.prototype.drag=function(e,o){var a=this,i=(a.options,e.children("a")),t=function(){var i=r(this),t=a.move;t.from&&(t.to={item:o,elem:e},i.addClass(n))};i.on("mousedown",function(){var r=a.move;r.from={item:o,elem:e}}),i.on("mouseenter",t).on("mousemove",t).on("mouseleave",function(){var e=r(this),o=a.move;o.from&&(delete o.to,e.removeClass(n))})},e("treePlus",function(e){var i=new t(e=e||{}),n=r(e.elem);return n[0]?(i.init(n),void(e.check&&("radio"==e.check?o.render("radio",e.formfilter||""):o.render("checkbox",e.formfilter||""),"checkbox"==e.check&&o.on("checkbox(icesadmin-tree-checkbox)",function(a){a.elem.checked?(r(a.elem).parent().find(">ul").find("input[type='checkbox']").prop("checked",!0),0!=r(a.elem).parents("li").length&&r(a.elem).parents("li").find(">input[type='checkbox']").prop("checked",!0)):r(a.elem).parent().find(">ul").find("input[type='checkbox']").prop("checked",!1),o.render("checkbox",e.formfilter||"")})))):a.error("layui.treeplus 没有找到"+e.elem+"元素")})});